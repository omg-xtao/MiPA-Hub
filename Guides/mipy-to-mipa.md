# Mi.py から MiPA への移行

このページでは Mi.py から MiPA への移行方法とどこが違うかをご説明します。大きな違いは以下の通りです。

| 項目                       | Mi.py | MiPA |
| -------------------------- | ----- | ---- |
| client.note.send ができる  | 〇    | ×    |
| パッケージが一つ           | 〇    | ×    |
| 今後の更新を行うか         | ×     | 〇   |
| 新規貢献者が参加しやすいか | ×     | 〇   |
| 保守性が高いか             | ×     | 〇   |

## client.note.send が出来ない

これは以下のように置き換えが必要です。Mi.py でも本来はこのように変更する予定でしたが、手違いにより現在の仕様になっています。

```diff
- client.note.send
+ client.note.action.send
```

## パッケージが一つではない

これは Mi.py からの移行にあたって大きな壁となる物です。
MiPA には以下の 2 つのライブラリがあります

- MiPA
  BotFrameWork を備えたライブラリ
- MiPAC
  Misskey の APIWrapper として作成されたライブラリ

今まで Mi.py 一つでやっていた物を 2 つのライブラリに分けています。
Mi.py のモジュールの場所を MiPA に置き換えた物が以下のものです

| Mi.py                  | MiPA     | MiPAC                |
| ---------------------- | -------- | -------------------- | --- |
| mi.framework.models.\* |          | mipac.models.\*      |
| mi.wrapper.models.\*   |          | mipac.core.models.\* |
| mi.ext                 | mipa.ext |                      |     |


## Mi.pyの今後について

Mi.pyはv4.0.0を最後の機能追加を含むアップデートとし、今後の開発については以下をご覧ください。

|作業名|やるかどうか|
|---|---|
|既存のエンドポイントの変更への追従|×|
|新規エンドポイントへの対応|×|
|小規模なバグの修正|〇|
|大規模なバグの修正|×|
|重大なセキュリティー上の問題（規模が大きい場合はarchiveも視野に）|〇|
|依存関係の更新|〇|
|新規機能の追加|×|

## 新規貢献者が参加しやすい

Mi.pyでは一部のimportではfromを使ったimportを使ってはいけないなど、一見すると問題ない行為が循環インポートの原因になり得る状態だったため、新しく開発に参加するのがとても困難な状態でした。それらの問題をMiPA / MiPACでは解決しています。

## 保守性が高い

Mi.pyではAPIWrapperとBotFrameWorkを同じライブラリ内で開発していたため、あっちこっちと振り回されることが多かったですが、これらの問題もMiPA / MiPACと2つのライブラリに分けることによって解決しています。